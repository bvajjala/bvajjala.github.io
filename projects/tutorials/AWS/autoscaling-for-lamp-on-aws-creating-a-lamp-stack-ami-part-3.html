
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Autoscaling for LAMP on AWS |Creating a LAMP Stack AMI : Part 3 - Balaji Vajjala's Blog</title>
  <meta name="author" content="Balaji Vajjala">

  
  <meta name="description" content="Autoscaling for LAMP on AWS |Creating a LAMP Stack AMI : Part 3 Autoscaling for LAMP on AWS | Load Test the Environment: Part 3 In part 3 of the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://bvajjala.github.io/projects/tutorials/aws/autoscaling-for-lamp-on-aws-creating-a-lamp-stack-ami-part-3.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Balaji Vajjala's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/assets/slides/css/for_blog.css">

  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Balaji Vajjala's Blog</a></h1>
  
    <h2>A DevOps Blog from Trenches</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:bvajjala.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about/home">Home</a></li> 
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/categories">Categories</a></li>
  <li><a href="/projects">Projects</a></li>
  <li><a href="/about/resume">About Me</a></li>
  <li><a href="/about/consulting">Consulting</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Autoscaling for LAMP on AWS |Creating a LAMP Stack AMI : Part 3</h1>
    
  </header>
  
  <h3>Autoscaling for LAMP on AWS | Load Test the Environment: Part 3</h3>

<p>In part 3 of the Autoscaling for LAMP on AWS series,</p>

<p>After setting up your application autoscaling, it’s important to load
run the application in order to understand the minimum and maximum
number of instances required for each application.</p>

<p><a href="../autoscaling-for-lamp-on-aws-setting-up-austoscaling-groups-part-2/index.html" title="Autoscaling for LAMP on AWS | Setting Up Austoscaling Groups : Part 2">Read Part 2 to learn more about setting up autoscaling
groups.</a></p>

<p>First, fire the load run. For this article we’ve used HP LoadRunner
because it provides more detailed results than others, but there are
also other load runner tools to choose from. Be sure to run the load
from multiple IP addresses or else the ELB may not distribute it equally
across all instances. HP LoadRunner helps you use multiple nodes in
order to generate the load.</p>

<p>Update the Auto Scaling Group’s minimum and maximum instance counts.\</p>

<p><img src="https://lh5.googleusercontent.com/nXhTs4kEqjzxfAy8aGdgqLvC_yKninSiyM3pClGWhemLXPWFjr_6Y5NU8xnf2j7twuJgVx2TO4tvs8fjm2K1c8y6C23NN8lacgef-JEH4621AXZITbYAAKRF4w" alt="" /></p>

<p>For the this article, we’ve set the minimum and maximum instance counts
at 2 and 8 respectively.</p>

<p>Now change your Auto Scaling Policies. A scaling policy specifies
whether to scale the auto scaling group up or down, and by how much.
Here we’ve chosen 2 instances for Scale Up and Scale Down policies.
These policies automatically increase or decrease the instances
according to your defined conditions in order to maintain performance
and minimize cost.</p>

<p><img src="https://lh3.googleusercontent.com/3G9JdQa1GNjF_2fWOrZ10y-cpc3m8_6gtTH2Y046OK3LoiaMYGx0Nm_N4LsBcBhhRhA3cxr7D1sMlCv90ewW9rZ8QCr8amOHqivVcZZmML7Bx-XMIeM7wdN1Nw" alt="" /></p>

<p>Next, <strong>increase the load</strong> gradually with LoadRunner. Once the CPU
reaches 75% of the instances, Autoscaling will trigger the scale up
policy to launch 2 more instances.</p>

<p>Now <strong>decrease the load</strong> gradually and the CPU instances load should
come down to less than 45%. Autoscaling will then trigger the scale down
policy and delete the additional instances that were launched.</p>

<p>Consider a scenario in which a 2,000-concurrent-request count is reached
during peak hours and 500 users are reached during non-peak hours. For
best load run results, try the following.</p>

<p>Capture load test results and CloudWatch metrics for each of the
following scenarios:</p>

<p>​1. Start the load test with 500 users. Set the minimum instance count
to 2 if you choose large or medium types, and set the maximum instance
count to 4.</p>

<p>​2. Increase the load to 1,000 users. Set the minimum and maximum
instance counts to 2 and 6 respectively.</p>

<p>​3. Increase the load to 2,000 users. Set the minimum and maximum
instance counts to 4 and 10 respectively.</p>

<p>​4. Increase the load to 3,000 users. Set the minimum and maximum
instance counts to 6 and 12 respectively.</p>

<p>Analyze the results for each scenario and note which gives better
throughput and response times. Also check the DB metrics.</p>

<p>Now it will be easy to choose the best instance type and max/min
instance counts..</p>

<p><strong>Shutdown Autoscaling</strong></p>

<p>Update the autoscale group to resize the instance count to 0. This will
terminate all instances launched within the lamp-asg autoscale group.</p>

<p><em>Watch out for the final part of this series tomorrow on how to choose
an instance type. </em></p>

<p><a href="autoscaling-for-lamp-on-aws-creating-a-lamp-stack-ami-part-3">Next</a></p>

  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://bvajjala.github.io/projects/tutorials/aws/autoscaling-for-lamp-on-aws-creating-a-lamp-stack-ami-part-3.html" data-via="BVajjala" data-counturl="http://bvajjala.github.io/projects/tutorials/aws/autoscaling-for-lamp-on-aws-creating-a-lamp-stack-ami-part-3.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>


</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>A little something about me.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/24/all-my-presntations/">All My Presntations</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/22/best-practices-of-continuous-integration/">Best Practices of Continuous Integration</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/21/continuous-delivery-pipeline-stages/">Continuous Delivery Pipeline Stages</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/21/implementing-practical-continuous-deployment/">Implementing Practical Continuous Deployment</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/21/practical-continuous-deployment/">Practical Continuous Deployment</a>
      </li>
    
  </ul>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/bvajjala@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Balaji Vajjala -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  






<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
