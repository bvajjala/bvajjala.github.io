
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>1.1 Setup and Checkin Application Code - Balaji Vajjala's Blog</title>
  <meta name="author" content="Balaji Vajjala">

  
  <meta name="description" content="1.1 Setup and Checkin Application Code Learning Objectives By the end of this lesson you will be able to: Setup your environments.
Setup and Checkin &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://bvajjala.github.io/devopsincloud/01/01.01.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Balaji Vajjala's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="no-sidebar"  class="collapse-sidebar sidebar-footer" >
  <header role="banner">
	<div class="header-title"><a href="/">Balaji Vajjala's Blog</a></div>


	<br><div class="header-subtitle">A DevOps Blog from Trenches</div>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:bvajjala.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">1.1 Setup and Checkin Application Code</h1>
    
  </header>
  
  <p>Learning Objectives</p>

<p>By the end of this lesson you will be able to:</p>

<ul>
<li><p>Setup your environments.</p></li>
<li><p>Setup and Checkin Application Code</p>

<ul>
<li>Learning Objectives</li>
<li>Check in changes to application code</li>
<li>Create an AWS account</li>
<li>Create a New Key Pair</li>
<li>Launch an AWS Utility instance using CloudFormation</li>
<li>Apply a bucket policy using CloudFormation</li>
<li>Create an S3 bucket to host credentials</li>
<li>Create SQS queues</li>
<li>Setup your GitHub Account</li>
<li>Checkin application code to GitHub</li>
</ul>
</li>
<li><p>Launch a CloudFormation stack.</p></li>
<li><p>Make an application code change and commit it to GitHub.</p>

<ul>
<li>SPECIAL: Synchronize your GitHub fork with latest stelligent/devopsinthecloud repository</li>
</ul>
</li>
</ul>


<h2>Check in changes to application code</h2>

<p><img src="https://s3.amazonaws.com/www.devopscloud.com/ppt/Slide02.jpg" alt="Slide1" /></p>

<h2>Create an AWS account</h2>

<p>Create an AWS account by registering for CloudFormation.</p>

<ol>
<li>Go to the AWS CloudFormation service: <a href="http://aws.amazon.com/cloudformation/">http://aws.amazon.com/cloudformation/</a>.</li>
<li>Click the <strong>Sign Up Now</strong> button</li>
<li>If you don’t have any account with AWS, choose <strong>I’m a New User</strong>; Otherwise, select <strong>enter your credentials</strong>.</li>
<li>Enter your login information, contact and billing information and read/accept AWS terms. During the account creation process, you will need to enter a code into your phone for verification purposes.</li>
<li>Once you’ve completed the registration process, you will be sent an email. Click on <a href="http://aws.amazon.com/account/">http://aws.amazon.com/account/</a>.</li>
</ol>


<h2>Create a New Key Pair</h2>

<ol>
<li>Go to the list of key pairs by going to <a href="https://console.aws.amazon.com/ec2/home?region=us-east-1#s=KeyPairs">this link</a>.</li>
<li>Select the <strong>Create Key Pair</strong> button and enter <strong>ditc</strong> in the <strong>Key Pair Name</strong> field and the <strong>Create</strong> button. Save the file onto your computer for future use. Click the <strong>Close</strong> button.</li>
</ol>


<h2>Launch an AWS Utility instance using CloudFormation</h2>

<ol>
<li>Click <a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#cstack=sn~AWSCLI%7Cturl~https://s3.amazonaws.com/filescdcourse/templates/base.template">this link</a> to launch an AWS command-line interface instance. This template is provided courtesy of AWS Training.</li>
<li>Click <strong>Continue</strong>.</li>
<li>In the <strong>KeyName</strong> field, enter the key pair (i.e. <strong>ditc</strong>) that you created in the previous section. Select the checkbox next to <strong>I acknowledge that this template may create IAM resources</strong> and click Continue.</li>
<li>Click Continue again, then Close.</li>
<li>Once the status in CloudFormation is <strong>CREATE_COMPLETE</strong>, select the checkbox next to AWSCLI.</li>
<li>Select the Outputs tab in the bottom panel and copy the DNS name for the instance into your clipboard</li>
<li>Find the <strong>ditc.pem</strong> file on your computer. If you are are a *nix-based computer, you will need to modify the permissions to 400.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ chmod 400 ditc.pem</span></code></pre></td></tr></table></div></figure>


<ol>
<li>From the directory where your ditc.pem is located, enter the command below to SSH into the utility instance. In the example below, the DNS name is <em>ec2-23-20-4-122.compute-1.amazonaws.com</em>. Yours will be different.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ssh -i ditc.pem ec2-user@ec2-23-20-4-122.compute-1.amazonaws.com         </span></code></pre></td></tr></table></div></figure>


<ol>
<li>Enter <strong>yes</strong> to the security prompt.</li>
</ol>


<h2>Apply a bucket policy using CloudFormation</h2>

<ol>
<li>Create a new S3 bucket. This will be used to host your build artifacts. Call it something like <strong><em>ditcxyzartifacts</em></strong> where <em>xyz</em> are your initials. I’m calling my bucket <em>stelligentlabs</em> throughout this LiveLesson.</li>
<li>Click <a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#cstack=sn~BucketPolicy%7Cturl~https://stelligentlabs.s3.amazonaws.com/templates/account_bucket_policies.template">this link</a> to run the bucket policy change.</li>
<li>Click Continue.</li>
<li>Enter the name of the bucket you you just created (e.g. &ldquo;<em>ditcxyzartifacts</em>&rdquo;) and click Continue.</li>
<li>Click Continue again, then Close.</li>
<li>Once the status in CloudFormation is <strong>CREATE_COMPLETE</strong>, the policy has been applied to your S3 bucket.</li>
</ol>


<h2>Create an S3 bucket to host credentials</h2>

<ol>
<li>Create a new S3 bucket and call it <strong>ditcxyzcreds</strong> &ndash; where <strong><em>xyz</em></strong> are your initials. Write down both of these S3 buckets (ditcxyzcreds and ditcxyzartifacts) as you will use them several times throughout this LiveLesson.</li>
</ol>


<h2>Create SQS queues</h2>

<ol>
<li>Go to the <strong><a href="https://console.aws.amazon.com/sqs/home">SQS</a></strong> tab and create two new queues. One called <strong>CloudFormationStacks</strong> and the other called <strong>Deployment</strong>. Set the <strong>Default Visibility Timeout</strong> to 0.</li>
</ol>


<h2>Setup your GitHub Account</h2>

<ol>
<li>If you don’t have a Github, create a free one here: <a href="https://github.com/signup/">https://github.com/signup/</a>.</li>
<li>Login to your account by going to <a href="https://github.com/login/">https://github.com/login</a></li>
<li>Go to <a href="https://github.com/stelligent/devopsinthecloud/">https://github.com/stelligent/devopsinthecloud</a></li>
<li>Click the <strong>Fork</strong> button. A message will display “Where do you want to fork this to?”. Click on the button that says <strong>Fork to YOURUSERID</strong>.</li>
<li>Go to <a href="https://github.com/stelligent/sample_app/">https://github.com/stelligent/sample_app</a></li>
<li>Click the <strong>Fork</strong> button. A message will display “Where do you want to fork this to?”. Click on the button that says <strong>Fork to YOURUSERID</strong>.</li>
<li>Create an SSH keypair by SSH’ing to the AWSCLI instance you created by launching the CloudFormation stack in the section above. In the example below, I’m using the email address that’s registered with my GitHub account. You can find yours by going to <a href="https://github.com/settings/profile/">https://github.com/settings/profile/</a>. Accept the defaults after running this command.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ssh-keygen -t rsa -C "paul.duvall@stelligent.com"       </span></code></pre></td></tr></table></div></figure>


<ol>
<li>Display the contents of the public key and copy the contents to your clipboard.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat ~/.ssh/id_rsa.pub</span></code></pre></td></tr></table></div></figure>


<ol>
<li>After logging into your GitHub account, go to your GitHub SSH Keys settings at <a href="https://github.com/settings/ssh/">https://github.com/settings/ssh/</a>. Click on the <strong>Add SSH Key</strong> button, give it a name and paste the contents of the public key into the <strong>Key</strong> text field. Then, click the <strong>Add key</strong> button. Enter your GitHub password when prompted.</li>
<li>Go back to the AWS CLI instance, go to the root directory and type the following from the command line. Replace <strong>bvajjala</strong> with your GitHub userid.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git clone git@github.com:bvajjala/sample_app.git              </span></code></pre></td></tr></table></div></figure>


<ol>
<li>Go back to the AWS CLI instance, go to the root directory and type the following from the command line. Replace <strong>bvajjala</strong> with your GitHub userid.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git clone git@github.com:bvajjala/devopsinthecloud.git       </span></code></pre></td></tr></table></div></figure>


<ol>
<li>Type <strong>ls</strong> from the command prompt. You should see <strong>sample_app</strong> and <strong>devopsinthecloud</strong> as subdirectories.</li>
<li>You can also setup the same environment on your local computer. This way it’s easier to use the IDE of your choice.</li>
</ol>


<h2>Checkin application code to GitHub</h2>

<ol>
<li>From the root directory of your EC2 instance change directory to <strong>sample_app</strong>.</li>
<li>Open the home.html.erb file</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo vim home.html.erb       </span></code></pre></td></tr></table></div></figure>


<ol>
<li>Make a modification to the contents of the file and save it.</li>
<li>Change directory to <strong>sample_app</strong>.</li>
<li>Add the file in Git</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git add .</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Commit the file to Git</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git commit -m "Modify the application code" </span></code></pre></td></tr></table></div></figure>


<ol>
<li>Push it to the Git master.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git push</span></code></pre></td></tr></table></div></figure>


<h2>SPECIAL: Synchronize your GitHub fork with latest bvajjala/devopsinthecloud repository</h2>

<p>By default, GitHub will not update changes from the <a href="https://github.com/stelligent/devopsinthecloud">https://github.com/stelligent/devopsinthecloud</a> GitHub repository. Since I will be making changes and updates after the video publication, you will want to go through the following steps to merge the changes we make at stelligent/devopsinthecloud with your forked repository.</p>

<ol>
<li>Clone your repository. Replace <strong>bvajjala</strong> with your GitHub username.</li>
<li>Change the directory</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd ditcsync</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Get the latest from the bvajjala repo.</li>
<li>Fetches any new changes from the original repo</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git pull upstream master</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Push changes to your forked repo.</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git push</span></code></pre></td></tr></table></div></figure>




  
    <footer>
      
      
    </footer>
  
</article>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  Balaji Vajjala <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> + <a href="https://github.com/ioveracker/mnml">mnml</a>.
	  
  </span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
