
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Tutotial : Continuous Delivery in the Cloud Part 6 of 6 - Balaji Vajjala's Blog</title>
  <meta name="author" content="Balaji Vajjala">

  
  <meta name="description" content="Inpart 1 of this series, I introduced theContinuous Delivery (CD) pipeline for theManatee Tracking application.
Inpart 2,I went over how we use this &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://bvajjala.github.io/blog/2014/04/04/tutotial-continuous-delivery-in-the-cloud-part-6-of-6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Balaji Vajjala's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
	<div class="header-title"><a href="/">Balaji Vajjala's Blog</a></div>


	<br><div class="header-subtitle">A DevOps Blog from Trenches</div>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:bvajjala.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
  
    
      <h1 class="entry-title">Tutotial : Continuous Delivery in the Cloud Part 6 of 6</h1>
    
  
    
      <p class="meta">
        








  


<time datetime="2014-04-04T14:00:06-04:00" pubdate data-updated="true">Apr 4<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>In<a href="http://www.stelligent.com/wp-admin/continuous-delivery-in-the-cloud-case-study-for-the-sea-to-shore-alliance-introduction-part-1-of-6">part 1 of this series</a>, I introduced the<a href="http://refcardz.dzone.com/refcardz/continuous-delivery-patterns">Continuous Delivery</a> (CD) pipeline for the<a href="http://manatees.mapntracker.com/wildtracks/">Manatee Tracking application</a>.
In<a href="../continuous-delivery-in-the-cloud-cd-pipeline-part-2-of-6/index.html">part 2</a>,I went over how we use this CD pipeline to deliver software from checkin to production.
In<a href="../continuous-delivery-in-the-cloud-cloudformation-part-3-of-6/index.html">part 3</a>,we focused on how CloudFormation is used to script the virtual AWS components that create the Manatee infrastructure.
Then in<a href="../continuous-delivery-in-the-cloud-dynamic-configuration-part-4-of-6/index.html">part 4</a>, we focused on a “property file less” environment by dynamically setting and retrieving properties.
<a href="../continuous-delivery-in-the-cloud-deployment-automation-part-5-of-6/index.html">Part 5</a> explained how we use Capistrano for scripting our deployment. A list of topics for each of the articles is summarized below:</p>

<p><a href="../continuous-delivery-in-the-cloud-case-study-for-the-sea-to-shore-alliance-introduction-part-1-of-6/index.html">Part 1: Introduction</a>
– Introduction to continuous delivery in the cloud and the rest of the articles;
 <a href="../continuous-delivery-in-the-cloud-cd-pipeline-part-2-of-6/index.html">Part 2: CD Pipeline</a>
– In-depth look at the CD Pipeline;
 <a href="../continuous-delivery-in-the-cloud-cloudformation-part-3-of-6/index.html">Part 3: CloudFormation</a>
– Scripted virtual resource provisioning;
 <a href="../continuous-delivery-in-the-cloud-dynamic-configuration-part-4-of-6/index.html">Part 4: Dynamic Configuration</a>
– “Property file less” infrastructure;
 <a href="../continuous-delivery-in-the-cloud-deployment-automation-part-5-of-6/index.html">Part 5: Deployment Automation</a>
– Scripted deployment orchestration;
 Part 6: Infrastructure Automation – What you’re reading now;</p>

<p>In this part of the series, I am going to show how we use <a href="http://puppetlabs.com/">Puppet</a> in combination with <a href="http://aws.amazon.com/cloudformation/">CloudFormation</a> to script our target environment infrastructure, preparing it for a Manatee application deployment.</p>

<p><strong>What is Puppet?</strong></p>

<p>Puppet is a Ruby based infrastructure automation tool. Puppet is primarily used for provisioning environments and managing configuration. Puppet is made to support multiple operating systems, making your infrastructure automation cross-platform.</p>

<p><strong>How does Puppet work?</strong></p>

<p>Puppet uses a library called <a href="http://www.puppetlabs.com/puppet/related-projects/facter/">Facter</a> which collects facts about your system. Facter returns details such as the operating system, architecture, IP address, etc. Puppet uses these facts to make decisions for provisioning your environment. Below is an example of the facts returned by Facter.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Facter architecture =&gt; i386 
</span><span class='line'>... 
</span><span class='line'>ipaddress =&gt; 172.16.182.129 
</span><span class='line'>is_virtual =&gt; true 
</span><span class='line'>kernel =&gt; Linux 
</span><span class='line'>kernelmajversion =&gt; 2.6 
</span><span class='line'>... 
</span><span class='line'>operatingsystem =&gt; CentOS 
</span><span class='line'>operatingsystemrelease =&gt; 5.5 
</span><span class='line'>physicalprocessorcount =&gt; 0 
</span><span class='line'>processor0 =&gt; Intel(R) Core(TM)2 Duo CPU     P8800  @ 2.66GHz 
</span><span class='line'>processorcount =&gt; 1 productname =&gt; VMware Virtual Platform</span></code></pre></td></tr></table></div></figure>


<p>Puppet uses the operating system <em>fact</em> to decide the service name as show below:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>case $operatingsystem {
</span><span class='line'>   centos, redhat: {
</span><span class='line'>     $service_name = 'ntpd'
</span><span class='line'>     $conf_file    = 'ntp.conf.el'
</span><span class='line'>   }
</span><span class='line'> }`</span></code></pre></td></tr></table></div></figure>


<p>With this case statement, if the operating environment is either <code>centos</code> or <code>redhat</code> the service name <code>ntpd</code> and the configuration file <code>ntp.conf.el</code> are used.</p>

<p>Puppet is declarative by nature. Inside a Puppet <em>module</em> you define the end state the environment end state after the Puppet run. Puppet enforces this state during the run. If at any point the environment does not conform to the desired state, the Puppet run fails.</p>

<p><strong>Anatomy of a Puppet Module</strong></p>

<p>To script the infrastructure Puppet uses <em>modules</em> for organizing related code to perform a specific task. A Puppet <em>module</em> has multiple sub directories that contain resources for performing the intended task. Below are these resources:</p>

<p><code>manifests/</code>: Contains the manifest class files for defining how to perform the intended task
 <code>files/</code>: Contains static files that the node can download during the installation
 <code>lib/</code>: Contains plugins
 <code>templates/</code>: Contains templates which can be used by the <em>module</em>’s manifests
 <code>tests/</code>: Contains tests for the <em>module</em></p>

<p>Puppet also uses <em>manifests</em> to manage multiple <em>modules</em> together <code>site.pp</code>. Puppet also uses another manifest to define what to install on each node, <code>default.pp</code>.</p>

<p><strong>How to run Puppet</strong></p>

<p>Puppet can be run using either a master agent configuration or a solo installation (puppet apply).</p>

<p><strong>Master Agent:</strong> With a master agent installation, you configure one main master puppet node which manages and configure all of your agent nodes (target environments). The master initiates the installation of the agent and manages it throughout its lifecycle. This model enables infrastructure changes to your agents in parallel by controlling the master node.</p>

<p><strong>Solo:</strong> In a solo Puppet run, it’s up to the user to place the desired Puppet <em>module</em> on the target environment. Once the <em>module</em> is on the target environment, the user needs run
<code>puppet apply --modulepath=/path/to/modules/ /path/to/site.pp</code>. Puppet will then provision the server with the provided <em>modules</em> and <code>site.pp</code> without relying on another node.</p>

<p><strong>Why do we use Puppet?</strong></p>

<p>We use Puppet to script and automate our infrastructure — making our environment provisioning repeatable, fully automated, and less error prone. Furthermore, scripting our environments gives us complete control over our infrastructure and the ability to terminate and recreate environments as often as they choose.</p>

<p><strong>Puppet for Manatees</strong></p>

<p>In the Manatee infrastructure, we use Puppet for provisioning our target environments. I am going to go through our manifests and <em>modules</em> while explaining their use and purpose. In our Manatee infrastructure, we create a new target environment as part of the CD pipeline – discussed in part 2 of the series,<a href="../continuous-delivery-in-the-cloud-cd-pipeline-part-2-of-6/index.html">CD Pipeline</a>.
Below I provide a high-level summary of the environment provisioning process:</p>

<p>​1. CloudFormation dynamically creates a params.pp manifest with AWS variables
2. CloudFormation runs puppet apply as part of UserData
3. Puppet runs the <em>modules</em> defined in hosts/default.pp.
4. Cucumber acceptance tests are run to verify the infrastructure was provisioned correctly.</p>

<p>Now that we know at a high-level what’s being done during the environment provisioning, let’s take a deeper look at the scripts in more detail. The actual scripts can be found here: <a href="http://code.google.com/p/sea2shore/source/browse/trunk/src/infrastructure/puppet/">Puppet</a></p>

<p>First we will start off with the manifests.</p>

<p>The <a href="http://code.google.com/p/sea2shore/source/browse/trunk/src/infrastructure/puppet/manifests/site.pp">site.pp</a> (shown below) serves two purposes. It loads the other manifests <code>default.pp</code>, <code>params.pp</code> and also sets stages <code>pre</code>, <code>main</code> and <code>post</code>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>import "hosts/*" import "classes/*"
</span><span class='line'>
</span><span class='line'>stage { [pre, post]: }
</span><span class='line'> Stage[pre] -&gt; Stage[main] -&gt; Stage[post]</span></code></pre></td></tr></table></div></figure>


<p>These stages are used to define the order in which Puppet <em>modules</em> should be run. If the Puppet <em>module</em> is defined as <code>pre</code>,it will run before Puppet <em>modules</em> defined as <code>main</code> or <code>post</code>. Moreover if stages aren’t defined,  Puppet will determine the order of execution. The <code>default.pp</code> (referenced below) shows how staging defined for executing puppet <em>modules</em>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>node default {
</span><span class='line'>   class { "params": stage =&gt; pre }
</span><span class='line'>   class { "java": stage =&gt; pre }
</span><span class='line'>   class { "system": stage =&gt; pre }
</span><span class='line'>   class { "tomcat6": stage =&gt; main }
</span><span class='line'>   class { "postgresql": stage =&gt; main }
</span><span class='line'>   class { "subversion": stage =&gt; main }
</span><span class='line'>   class { "httpd": stage =&gt; main }
</span><span class='line'>   class { "groovy": stage =&gt; main } 
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>The <a href="http://code.google.com/p/sea2shore/source/browse/trunk/src/infrastructure/puppet/manifests/hosts/default.pp">default.pp</a> manifest also defines which Puppet <em>modules</em> to use for provisioning the target environment.</p>

<p><a href="http://code.google.com/p/sea2shore/source/browse/trunk/src/infrastructure/puppet/manifests/classes/params.pp">params.pp</a> (shown below), loaded from site.pp, is dynamically created using CloudFormation. <code>params.pp</code> is used for setting AWS property values that are used later in the Puppet <em>modules</em>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> class params {
</span><span class='line'>   $s3_bucket = ''   
</span><span class='line'>   $application_name = ''
</span><span class='line'>   $hosted_zone = ''
</span><span class='line'>   $access_key = ''
</span><span class='line'>   $secret_access_key = ''
</span><span class='line'>   $jenkins_internal_ip = '' 
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>Now that we have an overview of the manifests used, lets take a look at the Puppet <em>modules</em> themselves.</p>

<p>In our <a href="http://code.google.com/p/sea2shore/source/browse/trunk/src/infrastructure/puppet/modules/java/manifests/init.pp">java</a> <em>module</em>, which is run in the <code>pre</code> stage, we are running a simple installation using packages. This is easily dealt with in Puppet by using the <code>package</code> resource. This relies on Puppet’s knowledge of the <em>operating system</em> and the <em>package manager</em>. Puppet simply installs the package that is declared.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class java {
</span><span class='line'>   package {  "java-1.6.0-openjdk": ensure =&gt; "installed" } 
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>The next <em>module</em> we’ll discuss is <a href="http://code.google.com/p/sea2shore/source/browse/trunk/src/infrastructure/puppet/modules/system/manifests/init.pp">system</a>. System is also run during the <code>pre</code> stage and is used for the setup of all the extra operations that don’t necessarily need their own <em>module</em>. These actions include setting up general packages (gcc, make, etc.), installing ruby gems (AWS sdk, bundler, etc.), and downloading custom scripts used on the target environment.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> class system {
</span><span class='line'>
</span><span class='line'>  include params
</span><span class='line'>
</span><span class='line'>  $access_key = $params::access_key
</span><span class='line'>  $secret_access_key = $params::secret_access_key
</span><span class='line'>
</span><span class='line'>  Exec { path =&gt; ‘/usr/bin:/bin:/usr/sbin:/sbin’ }
</span><span class='line'>
</span><span class='line'>  package { “gcc”: ensure =&gt; “installed” }
</span><span class='line'>   package { “mod_proxy_html”: ensure =&gt; “installed” }
</span><span class='line'>   package { “perl”: ensure =&gt; “installed” }
</span><span class='line'>   package { “libxslt-devel”: ensure =&gt; “installed” }
</span><span class='line'>   package { “libxml2-devel”: ensure =&gt; “installed” }
</span><span class='line'>   package { “make”: ensure =&gt; “installed” }
</span><span class='line'>
</span><span class='line'>  package {“bundler”:
</span><span class='line'>     ensure =&gt; “1.1.4”,
</span><span class='line'>     provider =&gt; gem
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  package {“trollop”:
</span><span class='line'>     ensure =&gt; “2.0”,
</span><span class='line'>     provider =&gt; gem
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  package {“aws-sdk”:
</span><span class='line'>     ensure =&gt; “1.5.6”,
</span><span class='line'>     provider =&gt; gem,
</span><span class='line'>     require =&gt; [
</span><span class='line'>       Package[“gcc”],
</span><span class='line'>       Package[“make”]
</span><span class='line'>     ]
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  file { “/home/ec2-user/aws.config”:
</span><span class='line'>     content =&gt; template(“system/aws.config.erb”),
</span><span class='line'>     owner =&gt; ‘ec2-user’,
</span><span class='line'>     group =&gt; ‘ec2-user’,
</span><span class='line'>     mode =&gt; ‘500’,
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  define download_file($site=“”,$cwd=“”,$creates=“”){
</span><span class='line'>     exec { $name:
</span><span class='line'>       command =&gt; “wget ${site}/${name}”,
</span><span class='line'>       cwd =&gt; $cwd,
</span><span class='line'>       creates =&gt; “${cwd}/${name}”
</span><span class='line'>     }
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  download_file {“database_update.rb”:
</span><span class='line'>     site =&gt; “https://s3.amazonaws.com/sea2shore”,
</span><span class='line'>     cwd =&gt; “/home/ec2-user”,
</span><span class='line'>     creates =&gt; “/home/ec2-user/database_update.rb”,
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  download_file {“id_rsa.pub”:
</span><span class='line'>     site =&gt; “https://s3.amazonaws.com/sea2shore/private”,
</span><span class='line'>     cwd =&gt; “/tmp”,
</span><span class='line'>     creates =&gt; “/tmp/id_rsa.pub”
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  exec {“authorized_keys”:
</span><span class='line'>     command =&gt; “cat /tmp/id_rsa.pub &gt;&gt; /home/ec2-user/.ssh/authorized_keys”,
</span><span class='line'>     require =&gt; Download_file[“id_rsa.pub”]
</span><span class='line'>     }
</span><span class='line'>   }</span></code></pre></td></tr></table></div></figure>


<p>First I want to point out that at the top we are specifying to <code>include params</code>. This enables the system <em>module</em> to access the <code>params.pp</code> file. This way we can use the properties defined in <code>params.pp.</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> include params
</span><span class='line'>
</span><span class='line'> $access_key = $params::access_key
</span><span class='line'> $secret_access_key = $params::secret_access_key</span></code></pre></td></tr></table></div></figure>


<p>This enables us to define the parameters in one central location and then reference that location with other <em>module</em>.</p>

<p>As we move through the script we are using the package resource similar to previous <em>modules</em>. For each rubygem we use the package resource and explicitly tell Puppet to use the <code>gem</code> provider. You can specify other providers like <code>rpm</code> and <code>yum</code>.</p>

<p>We use the <code>file</code> resource to create files from templates.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> AWS.config(
</span><span class='line'>   :access_key_id =&gt; "&lt;%= "#{access_key}" %&gt;",
</span><span class='line'>   :secret_access_key =&gt; "&lt;%= "#{secret_access_key}" %&gt;" 
</span><span class='line'> )</span></code></pre></td></tr></table></div></figure>


<p>In the <code>aws.config.erb</code> template (referenced above) we are using the properties defined in <code>params.pp</code> for dynamically creating an <code>aws.config</code> credential file. This file is then used by our <code>database_update.rb</code> script for connecting to <a href="http://aws.amazon.com/s3/">S3</a>.</p>

<p>Speaking of the <code>database_update.rb</code> script, we need to get it on the target environment. To do this, we define a <code>download_file</code> resource.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> define download_file($site="",$cwd="",$creates=""){
</span><span class='line'>   exec { $name:
</span><span class='line'>     command =&gt; "wget ${site}/${name}",
</span><span class='line'>     cwd =&gt; $cwd,
</span><span class='line'>     creates =&gt; "${cwd}/${name}"
</span><span class='line'>   }
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>This creates a new resource for Puppet to use. Using this we are able to download both the <code>database_update.rb</code> and <code>id_rsa.pub</code> public SSH key.</p>

<p>As a final step for setting up the system, we execute a bash line for copying the <code>id_rsa.pub</code> contents into the <code>authorized_keys</code> file for the <code>ec2-user</code>. This enables clients with the connected <code>id_rsa</code> key to ssh into the target environment as <code>ec2-user</code>.</p>

<p>The Manatee infrastructure uses <a href="http://httpd.apache.org/">Apache</a> for the webserver, <a href="http://tomcat.apache.org/">Tomcat</a> for the app server, and <a href="http://www.postgresql.org/">PostgreSQL</a> for its database. Puppet these up as part of the <code>main</code> stage, meaning they run in order after the <code>pre</code> stage <em>modules</em> are run.</p>

<p>In our <code>httpd</code> <em>module</em>, we are performing several steps discussed previously. The <code>httpd</code> package is installed and creating a new file from a template.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> class httpd {   include params
</span><span class='line'>
</span><span class='line'>  $application_name = $params::application_name
</span><span class='line'>   $hosted_zone = $params::hosted_zone
</span><span class='line'>
</span><span class='line'>  package { ‘httpd’:
</span><span class='line'>     ensure =&gt; installed,
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  file { “/etc/httpd/conf/httpd.conf”:
</span><span class='line'>     content =&gt; template(“httpd/httpd.conf.erb”),
</span><span class='line'>     require =&gt; Package[“httpd”],
</span><span class='line'>     owner =&gt; ‘ec2-user’,
</span><span class='line'>     group =&gt; ‘ec2-user’,
</span><span class='line'>     mode =&gt; ‘664’,
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  service { ‘httpd’:
</span><span class='line'>     ensure =&gt; running,
</span><span class='line'>     enable =&gt; true,
</span><span class='line'>     require =&gt; [
</span><span class='line'>       Package[“httpd”],
</span><span class='line'>       File[“/etc/httpd/conf/httpd.conf”]],
</span><span class='line'>       subscribe =&gt; Package[’httpd’],
</span><span class='line'>     }
</span><span class='line'>   }</span></code></pre></td></tr></table></div></figure>


<p>The new piece of functionality used in our <code>httpd</code> <em>module</em> is <code>service</code>. <code>service</code> allows us define the state the <code>httpd</code> service should be in at the end of our run. In this case, we are declaring that it should be running.</p>

<p>The Tomcat <em>module</em> again uses package to define what to install and service to declare the end state of the tomcat service.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> class tomcat6 {
</span><span class='line'>
</span><span class='line'>  Exec { path =&gt; ‘/usr/bin:/bin:/usr/sbin:/sbin’ }
</span><span class='line'>
</span><span class='line'>  package { “tomcat6”:
</span><span class='line'>     ensure =&gt; “installed”
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  $backup_directories = [
</span><span class='line'>     “/usr/share/tomcat6/.sarvatix/”,
</span><span class='line'>     “/usr/share/tomcat6/.sarvatix/manatees/”,
</span><span class='line'>     “/usr/share/tomcat6/.sarvatix/manatees/wildtracks/”,
</span><span class='line'>
</span><span class='line'>    “/usr/share/tomcat6/.sarvatix/manatees/wildtracks/database_backups/”,
</span><span class='line'>
</span><span class='line'>    “/usr/share/tomcat6/.sarvatix/manatees/wildtracks/database_backups/backup_archive”,
</span><span class='line'>   ]
</span><span class='line'>
</span><span class='line'>  file { $backup_directories:
</span><span class='line'>     ensure =&gt; “directory”,
</span><span class='line'>     owner =&gt; “tomcat”,
</span><span class='line'>     group =&gt; “tomcat”,
</span><span class='line'>     mode =&gt; 777,
</span><span class='line'>     require =&gt; Package[“tomcat6”],
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  service { “tomcat6”:
</span><span class='line'>     enable =&gt; true,
</span><span class='line'>     require =&gt; [
</span><span class='line'>       File[$backup_directories],
</span><span class='line'>       Package[“tomcat6”]],
</span><span class='line'>     ensure =&gt; running,
</span><span class='line'>   }
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>Tomcat uses the <code>file</code> resource differently then previous <em>modules</em>. <code>tomcat</code> uses <code>file</code> for creating directories. This is defined using <code>ensure =&gt; “directory”</code>.</p>

<p>We are using the <code>package</code> resource for installing PostgreSQL, building files from templates using the <code>file</code> resource, performing bash executions with <code>exec</code>, and declaring the intended state of the PostgreSQL using the <code>service</code> resource.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> class postgresql {
</span><span class='line'>
</span><span class='line'>  include params
</span><span class='line'>
</span><span class='line'>  $jenkins_internal_ip = $params::jenkins_internal_ip
</span><span class='line'>
</span><span class='line'>  Exec { path =&gt; ‘/usr/bin:/bin:/usr/sbin:/sbin’ }
</span><span class='line'>
</span><span class='line'>  define download_file($site=“”,$cwd=“”,$creates=“”){
</span><span class='line'>     exec { $name:
</span><span class='line'>       command =&gt; “wget ${site}/${name}”,
</span><span class='line'>       cwd =&gt; $cwd,
</span><span class='line'>       creates =&gt; “${cwd}/${name}”
</span><span class='line'>     }
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  download_file {“wildtracks.sql”:
</span><span class='line'>     site =&gt; “https://s3.amazonaws.com/sea2shore”,
</span><span class='line'>     cwd =&gt; “/tmp”,
</span><span class='line'>     creates =&gt; “/tmp/wildtracks.sql”
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  download_file {“createDbAndOwner.sql”:
</span><span class='line'>     site =&gt; “https://s3.amazonaws.com/sea2shore”,
</span><span class='line'>     cwd =&gt; “/tmp”,
</span><span class='line'>     creates =&gt; “/tmp/createDbAndOwner.sql”
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  package { “postgresql8-server”:
</span><span class='line'>     ensure =&gt; installed,
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  exec { “initdb”:
</span><span class='line'>     command =&gt; “service postgresql initdb”,
</span><span class='line'>     require =&gt; Package[“postgresql8-server”]
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  file { “/var/lib/pgsql/data/pg_hba.conf”:
</span><span class='line'>     content =&gt; template(“postgresql/pg_hba.conf.erb”),
</span><span class='line'>     require =&gt; Exec[“initdb”],
</span><span class='line'>     owner =&gt; ‘postgres’,
</span><span class='line'>     group =&gt; ‘postgres’,
</span><span class='line'>     mode =&gt; ‘600’,
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  file { “/var/lib/pgsql/data/postgresql.conf”:
</span><span class='line'>     content =&gt; template(“postgresql/postgresql.conf.erb”),
</span><span class='line'>     require =&gt; Exec[“initdb”],
</span><span class='line'>     owner =&gt; ‘postgres’,
</span><span class='line'>     group =&gt; ‘postgres’,
</span><span class='line'>     mode =&gt; ‘600’,
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  service { “postgresql”:
</span><span class='line'>     enable =&gt; true,
</span><span class='line'>     require =&gt; [
</span><span class='line'>       Exec[“initdb”],
</span><span class='line'>       File[“/var/lib/pgsql/data/postgresql.conf”],
</span><span class='line'>       File[“/var/lib/pgsql/data/pg_hba.conf”]],
</span><span class='line'>     ensure =&gt; running,
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  exec { “create-user”:
</span><span class='line'>     command =&gt; “echo CREATE USER root | psql -U postgres”,
</span><span class='line'>     require =&gt; Service[“postgresql”]
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  exec { “create-db-owner”:
</span><span class='line'>     require =&gt; [
</span><span class='line'>       Download_file[“createDbAndOwner.sql”],
</span><span class='line'>       Exec[“create-user”],
</span><span class='line'>       Service[“postgresql”]],
</span><span class='line'>     command =&gt; “psql &lt; /tmp/createDbAndOwner.sql -U postgres”
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  exec { “load-database”:
</span><span class='line'>     require =&gt; [
</span><span class='line'>       Download_file[“wildtracks.sql”],
</span><span class='line'>       Exec[“create-user”],
</span><span class='line'>       Service[“postgresql”],
</span><span class='line'>       Exec[“create-db-owner”]],
</span><span class='line'>     command =&gt; “psql -U manatee_user -d manatees_wildtrack -f /tmp/wildtracks.sql”
</span><span class='line'>   }
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>In this module we are creating a new user on the PostgreSQL database:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>exec {  "create-user":
</span><span class='line'>   command =&gt; "echo CREATE USER root | psql -U postgres",
</span><span class='line'>   require =&gt; Service["postgresql"]
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>In this next section we download the latest Manatee database SQL dump.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>download_file {"wildtracks.sql":
</span><span class='line'>   site =&gt; "https://s3.amazonaws.com/sea2shore",
</span><span class='line'>   cwd =&gt; "/tmp",   creates =&gt; "/tmp/wildtracks.sql" 
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>In the section below, we load the database with the SQL file. This builds our target environments with the production database content giving developers an exact replica sandbox to work in.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>exec { “load-database”:
</span><span class='line'>   require =&gt; [
</span><span class='line'>     Download_file[“wildtracks.sql”],
</span><span class='line'>     Exec[“create-user”],
</span><span class='line'>     Service[“postgresql”],
</span><span class='line'>     Exec[“create-db-owner”]],
</span><span class='line'>   command =&gt; “psql -U manatee_user -d manatees_wildtrack -f /tmp/wildtracks.sql”
</span><span class='line'>   }
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>Lastly in our Puppet run, we install <code>subversion</code> and <code>groovy</code> on the target node. We could have just included these in our system module, but they seemed general purpose enough to create individual <em>modules</em>.</p>

<p>Subversion manifest:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> class subversion {
</span><span class='line'>   package { "subversion":
</span><span class='line'>     ensure =&gt; "installed"   
</span><span class='line'>  } 
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>Groovy manifest:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> class groovy {   Exec { path =&gt; '/usr/bin:/bin:/usr/sbin:/sbin' }
</span><span class='line'>
</span><span class='line'>  define download_file($site=“”,$cwd=“”,$creates=“”){
</span><span class='line'>     exec { $name:
</span><span class='line'>     command =&gt; “wget ${site}/${name}”,
</span><span class='line'>     cwd =&gt; $cwd,
</span><span class='line'>     creates =&gt; “${cwd}/${name}”
</span><span class='line'>     }
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  download_file {“groovy-1.8.2.tar.gz”:
</span><span class='line'>     site =&gt; “https://s3.amazonaws.com/sea2shore/resources/binaries”,
</span><span class='line'>     cwd =&gt; “/tmp”,
</span><span class='line'>     creates =&gt; “/tmp/groovy-1.8.2.tar.gz”,
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  file { “/usr/bin/groovy-1.8.2/”:
</span><span class='line'>     ensure =&gt; “directory”,
</span><span class='line'>     owner =&gt; “root”,
</span><span class='line'>     group =&gt; “root”,
</span><span class='line'>     mode =&gt; 755,
</span><span class='line'>     require =&gt; Download_file[“groovy-1.8.2.tar.gz”],
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>  exec { “extract-groovy”:
</span><span class='line'>     command =&gt; “tar -C /usr/bin/groovy-1.8.2/ -xvf /tmp/groovy-1.8.2.tar.gz”,
</span><span class='line'>     require =&gt; File[“/usr/bin/groovy-1.8.2/”],
</span><span class='line'>   }
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>The Subversion manifest is relatively straightforward as we are using the package resource. The Groovy manifest is slightly different, we are downloading the Groovy tar, placing it on the filesystem, and then extracting it.</p>

<p>We’ve gone through how the target environment is provisioned. We do however have one more task, testing. It’s not enough to assume that if Puppet doesn’t error out, that everything got installed successfully. For this reason, we use <a href="http://cukes.info/">Cucumber</a> to do acceptance testing against our environment. Our tests check if services are running, configuration files are present and if the right packages have been installed.</p>

<p>Puppet allows us to completely script and version our target environments. Consequently, this enables us to treat environments as disposable entities. As a practice, we create a new target environment every time our <a href="../continuous-delivery-in-the-cloud-cd-pipeline-part-2-of-6/index.html">CD pipeline</a> is run. This way we are always deploying against a known state.</p>

<p>As our blog series is coming to a close, let’s recap what we’ve gone through. In the Manatee infrastructure we use a combination of <a href="../continuous-delivery-in-the-cloud-cloudformation-part-3-of-6/index.html">CloudFormation</a>
for scripting AWS resources, Puppet for scripting target environments, <a href="../continuous-delivery-in-the-cloud-deployment-automation-part-5-of-6/index.html">Capistrano</a> for deployment automation, <a href="../continuous-delivery-in-the-cloud-dynamic-configuration-part-4-of-6/index.html">Simple DB</a> and CloudFormation for dynamic properties and</p>

<p><a href="../continuous-delivery-in-the-cloud-cd-pipeline-part-2-of-6/index.html">Jenkins</a> for coordinating all the resources into one cohesive unit for moving a Manatee application change from check-in to production in just a single click.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Balaji Vajjala</span></span>

      








  


<time datetime="2014-04-04T14:00:06-04:00" pubdate data-updated="true">Apr 4<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/aws/'>AWS</a>, <a class='category' href='/blog/categories/cd/'>CD</a>, <a class='category' href='/blog/categories/ci/'>CI</a>, <a class='category' href='/blog/categories/tutorial/'>Tutorial</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://bvajjala.github.io/blog/2014/04/04/tutotial-continuous-delivery-in-the-cloud-part-6-of-6/" data-via="BVajjala" data-counturl="http://bvajjala.github.io/blog/2014/04/04/tutotial-continuous-delivery-in-the-cloud-part-6-of-6/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/04/04/tutorial-continuous-delivery-in-the-cloud-part-5-of-6/" title="Previous Post: Tutorial : Continuous Delivery in the Cloud Part 5 of 6">&laquo; Tutorial : Continuous Delivery in the Cloud Part 5 of 6</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/04/04/a-case-study-on-using-100-percent-cloud-based-resources-with-automated-software-delivery/" title="Next Post: A case study on using 100% cloud based Resources with Automated Software Delivery">A case study on using 100% cloud based Resources with Automated Software Delivery &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>A little something about me.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/04/a-case-study-on-using-100-percent-cloud-based-resources-with-automated-software-delivery/">A case study on using 100% cloud based Resources with Automated Software Delivery</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/04/tutotial-continuous-delivery-in-the-cloud-part-6-of-6/">Tutotial : Continuous Delivery in the Cloud Part 6 of 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/04/tutorial-continuous-delivery-in-the-cloud-part-5-of-6/">Tutorial : Continuous Delivery in the Cloud Part 5 of 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/04/tutorial-continuous-delivery-in-the-cloud-part-4-of-6/">Tutotial : Continuous Delivery in the Cloud Part 4 of 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/04/tutorial-continuous-delivery-in-the-cloud-part-3-of-6/">Tutorial : Continuous Delivery in the Cloud Part 3 of 6</a>
      </li>
    
  </ul>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/bvajjala@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  Balaji Vajjala <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> + <a href="https://github.com/ioveracker/mnml">mnml</a>.
	  
  </span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
